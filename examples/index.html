<html charset="UTF-8">
  <head>
    <style type="text/css" media="screen">
     body {
         overflow: hidden;
     }
     #editor {
         margin: 0;
         position: absolute;
         top: 0;
         bottom: 0;
         left: 0;
         right: 50%;
     }
     .right {
         margin: 0;
         position: absolute;
         top: 0;
         bottom: 0;
         left: 50%;
         right: 0;
     }
     #aceDiv, #shareDiv {
         padding: 0 20px;
         height: 50%;
         width: 100%;
         overflow: scroll;
     }

     
    </style>
  </head> 
  <pre id="editor"></pre> 
  <div class="right">
    <div id="aceDiv">
      <h1>Ace Editor</h1>
      <ol id="ace_debug"></ol>
    </div>
    <div id="shareDiv">
      <h1>ShareDB</h1>
      <ol id="share_debug"></ol>
    </div>
  </div>
  <script src="./lib/require.js"></script>
  <script type="text/javascript">
   require.config({
     paths: {
       ace: "../ace/build/src",
       lib: "../distribution", 
     }
   });

   require(['ace/ace', 'lib/sharedb-ace'], function(ace, SharedbAce) {
     // TODO: fix worker path issue
     /* ace.config.set("workerPath", "../ace/build/src");*/
     var editor = ace.edit("editor") ; 
     editor.setTheme("ace/theme/twilight");
     var session = editor.getSession();
     /* var aceDiv = document.getElementById("ace_debug");*/
     session.setMode("ace/mode/javascript");
     session.setNewLineMode("unix");
     /* session.on("change", function(delta) {
      *   var node = document.createElement("LI");
      *   var textnode = document.createTextNode(JSON.stringify(delta));
      *   node.appendChild(textnode);
      *   aceDiv.appendChild(node);
      * });*/

     var ShareAce = new SharedbAce.default("ws://localhost:3000/", "codepad", "5898777197b4b41abeb7cfda");
     ShareAce.on('ready', function() {
       ShareAce.add(editor, ["code"]);
     }) 
   }); 
  </script>
</html>
