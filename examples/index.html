<html charset="UTF-8">
  <head>
    <style type="text/css" media="screen">
     body {
         overflow: hidden;
     }
     #editor {
         margin: 0;
         position: absolute;
         top: 0;
         bottom: 0;
         left: 0;
         right: 0;
     } 
    </style>
  </head> 
  <pre id="editor"></pre>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/ace.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-javascript.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/theme-twilight.js"></script>
  <script src="../distribution/sharedb-ace.js"></script>
  
  <script type="text/javascript"> 
   var editor = ace.edit("editor"); 
   editor.setTheme("ace/theme/twilight");
   var session = editor.getSession();
   session.setMode("ace/mode/javascript");
   session.setNewLineMode("unix");

   function get(url, callback){
     var xmlhttp;
     // compatible with IE7+, Firefox, Chrome, Opera, Safari
     xmlhttp = new XMLHttpRequest();
     xmlhttp.onreadystatechange = function(){
       if (xmlhttp.readyState == 4 && xmlhttp.status == 200){
         callback(JSON.parse(xmlhttp.responseText));
       }
     }
     xmlhttp.open("GET", url, true);
     xmlhttp.send();
   }

   get("http://localhost:3000/gists/latest", function(data) {
     var ShareAce = new sharedbAce("ws://localhost:3000/ws", "codepad", data.id);
     ShareAce.on('ready', function() {
       ShareAce.add(editor, ["code"]);
     }); 
   }) 
  </script>
</html>
